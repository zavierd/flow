# 🧮 动态价格计算界面使用说明

## 功能概述

动态价格计算界面是整木定制产品库管理系统的重要功能，专门用于处理图森产品的"超高部分"定价需求。该界面允许用户输入产品的自定义尺寸，系统会根据预设的加价规则自动计算最终价格。

## 访问方式

### 1. 通过管理后台导航
- 登录管理后台：`http://localhost:8001/admin/`
- 在顶部导航栏中点击 **🧮 价格计算器**

### 2. 直接访问
- 直接访问：`http://localhost:8001/pricing-calculator/`

## 界面功能

### 📦 产品选择
- **选择产品 (SKU)**：从下拉菜单中选择需要计算价格的产品
- **产品信息显示**：选择产品后自动显示产品基本信息
  - 产品名称
  - 基础价格
  - 品牌信息
  - SPU信息

### 📏 自定义尺寸输入
- **高度 (mm)**：输入产品的实际高度
- **宽度 (mm)**：输入产品的实际宽度
- **厚度/深度 (mm)**：输入产品的实际厚度
- **智能提示**：系统会显示标准尺寸作为参考

### 💰 价格计算结果
- **基础价格**：产品的标准价格
- **总价格**：包含所有加价后的最终价格
- **加价金额**：超标尺寸产生的额外费用

### 📊 详细计算信息
- **应用规则列表**：显示所有触发的加价规则
- **规则详情**：包含阈值、实际值、超出值、计算方法等
- **计算汇总**：应用规则数、总加价、计算时间等

## 使用步骤

### 步骤1：选择产品
1. 在"选择产品 (SKU)"下拉菜单中选择需要计算的产品
2. 系统会自动显示产品基本信息和标准尺寸

### 步骤2：输入自定义尺寸
1. 根据实际需求输入产品的高度、宽度、厚度
2. 如果某个尺寸使用标准值，可以留空
3. 系统会显示标准尺寸作为参考

### 步骤3：计算价格
1. 点击"🧮 计算价格"按钮
2. 系统会实时计算并显示结果
3. 查看详细的加价规则和计算过程

### 步骤4：查看结果
1. 查看最终价格和加价明细
2. 了解哪些规则被应用
3. 确认计算结果是否符合预期

## 实际应用示例

### 示例1：J007木门超标尺寸计算

**产品信息**：
- 产品：J007木门
- 基础价格：¥2,630.00
- 标准尺寸：2335mm × 905mm × 300mm

**自定义尺寸**：
- 高度：2400mm（超出65mm）
- 宽度：950mm（超出45mm）
- 厚度：350mm（超出50mm）

**计算结果**：
- 基础价格：¥2,630.00
- 总价格：¥3,070.00
- 加价：¥440.00

**应用规则**：
- 单开门高度超标加价：+¥140.00
- 单开门宽度超标加价：+¥150.00
- 单开门厚度超标加价：+¥150.00

## 加价规则说明

### 木门产品加价规则
- **高度超标**：每超10mm加收20元
- **宽度超标**：每超10mm加收30元
- **厚度超标**：每超10mm加收30元

### 计算方法
1. **阶梯计算**：按10mm为单位进行阶梯计算
2. **不足进位**：不足10mm按10mm计算
3. **累加计算**：多项超标费用累加

## 技术特点

### 🔄 实时计算
- 输入尺寸后即时计算价格
- 无需刷新页面，响应迅速

### 📊 详细展示
- 完整的计算过程展示
- 每项加价规则的详细说明
- 计算时间和应用规则数统计

### 🛡️ 数据验证
- 前端输入验证
- 后端数据校验
- 错误信息友好提示

### 📱 响应式设计
- 支持桌面和移动设备
- 自适应不同屏幕尺寸
- 现代化的用户界面

## 注意事项

### 1. 产品选择
- 只有状态为"在售"的产品才会显示在选择列表中
- 产品必须有关联的SPU和加价规则才能进行动态计算

### 2. 尺寸输入
- 尺寸单位统一为毫米(mm)
- 只接受正数输入
- 留空表示使用标准尺寸

### 3. 计算精度
- 价格计算精确到分(0.01元)
- 尺寸计算精确到毫米
- 加价规则按实际业务需求设定

### 4. 浏览器兼容性
- 推荐使用Chrome、Firefox、Safari等现代浏览器
- 需要启用JavaScript功能
- 支持CSS3和HTML5特性

## 常见问题

### Q1：为什么某些产品无法计算价格？
**A1**：可能的原因包括：
- 产品没有关联的SPU
- SPU没有设置加价规则
- 产品状态不是"在售"

### Q2：计算结果与预期不符怎么办？
**A2**：请检查：
- 输入的尺寸是否正确
- 加价规则是否正确配置
- 产品的标准尺寸是否准确

### Q3：如何修改加价规则？
**A3**：
- 登录管理后台
- 进入"Products pricing rules"
- 编辑相应的加价规则

### Q4：界面显示异常怎么办？
**A4**：
- 刷新页面重试
- 检查网络连接
- 清除浏览器缓存
- 联系系统管理员

## 更新日志

### v1.0.0 (2025-01-18)
- ✅ 初始版本发布
- ✅ 支持产品选择和尺寸输入
- ✅ 实现动态价格计算
- ✅ 完整的计算结果展示
- ✅ 响应式界面设计
- ✅ 集成到管理后台导航

## 技术支持

如果在使用过程中遇到问题，请：
1. 查看本使用说明
2. 检查系统日志
3. 联系技术支持团队

---

*最后更新：2025年1月18日* 